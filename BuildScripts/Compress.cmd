:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:: Global variables
:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

CALL %* 
EXIT /B


:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::
:: Global functions
:::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::::

:CompressFiles
SET OUTPUT_DIR=%1
SET ZIP_FILE_NAME=%1\MINARY_%2.zip
SET INPUT_DIR=%3

SET COMMAND=7z.exe a -r %ZIP_FILE_NAME% %INPUT_DIR%
SET PATH=%PATH%;C:\Program Files\7-Zip\
7z.exe 1> nul

IF %ERRORLEVEL%==0 GOTO EXECUTE

IF %ERRORLEVEL%==9009 GOTO END


:END
ECHO Can't create a zip packet
EXIT /b

:EXECUTE
ECHO %COMMAND%
%COMMAND%
EXIT /b